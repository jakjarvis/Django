{% extends 'stock/base.html' %}

{%load plotly_dash%}

{% block content %}
<div style = "border-radius:5px 5px 0 0; background-color:#f9ca24">
  <div style = "margin:10px 10px 0 10px">
    <h3>My Portfolio</h3>
    <a href="{% url 'createstock' %}" class="btn btn-primary">Add Transaction</a>
    <a href="{% url 'overview' %}" class="btn btn-primary">View Transactions</a>
  </div>
  <div class="{%plotly_class name='ticker'%}">
      {% plotly_app ratio=0.7 name="ticker" initial_arguments=stock_ticker %}
  </div>
</div>
<div class="container" style="border-radius:0 0 5px 5px; background-color:#f9ca24">
  <table class="table table-light table-striped">
    <thead>
      <tr>
        <th>Stock</th>
        <th>Total_held</th>
        <th>Av_Buy_Price</th>
        <th>Total_Spent</th>
        <th>Total_Return</th>
        <th>Current Value</th>
      </tr>
    </thead>
    <tbody>
    <!-- jinja2 Technique -->
    {% if data %}
    {% for i in data %}
      <tr>
        <td>{{i.Ticker}}</td>
        <td>{{i.Total_held}}</td>
        <td>{{i.Av_Buy_Price}}</td>
        <td>{{i.Total_Spent}}</td>
        <td>{{i.Total_Return}}</td>
        <td>{{i.Current_Value}}</td>
      </tr>
    {% endfor %}
    {% endif %}
    </tbody>
  </table>
</div>

{% endblock %}